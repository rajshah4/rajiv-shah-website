<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interactive visualization of one-hot encoding transformation for categorical data in machine learning">
    <meta name="keywords" content="one-hot encoding, machine learning, data transformation, categorical variables, data preprocessing, visualization">
    <title>One-Hot Encoding Animation - Interactive Visualization</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX support -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Add any custom CSS here */
        .widget-container {
            margin: 2rem auto;
            padding: 1rem;
            border-radius: 0.5rem;
            background-color: #f9fafb;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        /* Responsive container */
        .content-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        /* Documentation styling */
        .docs-section {
            margin-bottom: 2rem;
            line-height: 1.6;
        }
        
        h1 {
            font-size: 2.25rem;
            font-weight: bold;
            margin-bottom: 1rem;
            color: #1f2937;
        }
        
        h2 {
            font-size: 1.5rem;
            font-weight: bold;
            margin-top: 2rem;
            margin-bottom: 0.75rem;
            color: #1f2937;
        }
        
        p {
            margin-bottom: 1rem;
        }
        
        code {
            background-color: #f3f4f6;
            padding: 0.2rem 0.4rem;
            border-radius: 0.25rem;
            font-family: monospace;
        }
        
        pre {
            background-color: #f3f4f6;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            margin-bottom: 1.5rem;
        }
    </style>
</head>
<body class="bg-white text-gray-800">
    <div class="content-wrapper">
        <!-- Documentation Section -->
        <div class="docs-section">
            <h1>One-Hot Encoding Animation</h1>
            
            <p>
                This interactive visualization demonstrates the process of one-hot encoding, a crucial technique in 
                machine learning for handling categorical variables. The animation shows how categorical data 
                (in this case, city names) gets transformed into a binary matrix representation that machine learning 
                algorithms can work with effectively.
            </p>
            
            <h2>What is One-Hot Encoding?</h2>
            <p>
                One-hot encoding is a process that transforms categorical variables into a format that machine learning 
                algorithms can better understand. For each category, it creates a new binary column that contains 1 if 
                the data belongs to that category and 0 otherwise. This expands the dataset width but allows algorithms 
                to work with the categorical data without assuming any ordinal relationship between categories.
            </p>
            
            <h2>How to Use This Visualization</h2>
            <p>
                The animation automatically cycles through the following stages:
            </p>
            <ol class="list-decimal ml-6 mb-4">
                <li class="mb-2">Original dataset with the categorical "city" variable</li>
                <li class="mb-2">Beginning of the encoding process with the first binary column</li>
                <li class="mb-2">Complete encoding with all binary columns added</li>
                <li class="mb-2">Removal of the original categorical column</li>
                <li class="mb-2">Final one-hot encoded dataset</li>
            </ol>
            <p>
                Watch how the table transforms and expands, creating a wider but sparse dataset (mostly filled with zeros).
            </p>
        </div>
        
        <!-- Widget Container -->
        <div class="widget-container" id="widget-root"></div>
        
        <!-- Additional Information -->
        <div class="docs-section">
            <h2>Why One-Hot Encoding Matters</h2>
            <p>
                Many machine learning algorithms, especially those based on mathematical calculations, cannot directly 
                handle categorical text data. By converting categories into binary vectors, we can:
            </p>
            <ul class="list-disc ml-6 mb-4">
                <li class="mb-2">Remove any implied ordering between categories</li>
                <li class="mb-2">Allow algorithms to treat each category independently</li>
                <li class="mb-2">Improve model performance for categorical features</li>
            </ul>
            <p>
                However, one-hot encoding increases the dimensionality of the dataset (known as the "curse of dimensionality"), 
                which can be problematic for categories with many unique values. Alternatives like feature hashing or 
                embedding techniques may be more appropriate in those cases.
            </p>
        </div>
        <footer class="mt-12 border-t border-gray-200 pt-6 pb-8 text-center text-gray-600">
          <p>This interactive visualization is part of 
            <a href="https://projects.rajivshah.com/blog" class="text-blue-600 hover:text-blue-800 underline">
              projects.rajivshah.com/blog
            </a>
          </p>
          <p class="text-sm mt-2">© Rajiv Shah @rajistics</p>
        </footer>
    </div>

    <!-- Your React Component Script -->
    <script type="text/babel">
        // One-Hot Encoding Animation Component
        const OneHotEncodingAnimation = () => {
          const [animationStage, setAnimationStage] = useState(0);
          const [showTransformation, setShowTransformation] = useState(false);
          
          // Original dataset with categorical variable
          const originalData = [
            { id: 1, name: "Alice", city: "New York", age: 28 },
            { id: 2, name: "Bob", city: "Chicago", age: 35 },
            { id: 3, name: "Charlie", city: "San Francisco", age: 42 },
            { id: 4, name: "Diana", city: "New York", age: 31 },
            { id: 5, name: "Evan", city: "Chicago", age: 25 },
            { id: 6, name: "Fiona", city: "Miami", age: 38 },
            { id: 7, name: "George", city: "San Francisco", age: 29 },
            { id: 8, name: "Hannah", city: "Miami", age: 33 },
          ];
          
          // Get unique categories for the "city" column
          const uniqueCities = [...new Set(originalData.map(item => item.city))];
          
          // Generate one-hot encoded data
          const encodedData = originalData.map(row => {
            const encodedRow = { ...row };
            // Add one-hot encoded columns with initial value of 0
            uniqueCities.forEach(city => {
              encodedRow[`city_${city.replace(/\s+/g, '_')}`] = row.city === city ? 1 : 0;
            });
            // Remove the original city column in the final result
            if (animationStage >= 3) {
              delete encodedRow.city;
            }
            return encodedRow;
          });
          
          useEffect(() => {
            // Progress through animation stages
            const timer = setTimeout(() => {
              if (animationStage < 4) {
                setAnimationStage(prev => prev + 1);
              } else {
                // Reset animation after reaching the end
                setTimeout(() => {
                  setShowTransformation(false);
                  setTimeout(() => {
                    setAnimationStage(0);
                    setShowTransformation(true);
                  }, 1000);
                }, 3000);
              }
            }, 2000);
            
            return () => clearTimeout(timer);
          }, [animationStage]);
          
          useEffect(() => {
            // Start with showing the transformation
            setShowTransformation(true);
          }, []);
          
          // Get visible columns based on animation stage
          const getVisibleColumns = () => {
            const basicColumns = ['id', 'name', 'city', 'age'];
            const encodedColumns = uniqueCities.map(city => `city_${city.replace(/\s+/g, '_')}`);
            
            if (animationStage === 0) {
              return basicColumns;
            } else if (animationStage === 1) {
              return [...basicColumns, encodedColumns[0]];
            } else if (animationStage === 2) {
              return [...basicColumns, ...encodedColumns];
            } else {
              // For stages 3 and 4, remove the original city column
              return ['id', 'name', 'age', ...encodedColumns];
            }
          };
          
          const visibleColumns = getVisibleColumns();
          
          const getTransitionStyles = () => {
            // When showing transformation, add transition
            if (showTransformation) {
              return "transition-all duration-1000 ease-in-out";
            }
            return "";
          };
          
          return (
            <div className="flex flex-col items-center justify-center w-full h-full bg-gray-100 p-4">
              <div className="mb-6 text-center">
                <h2 className="text-2xl font-bold mb-2">One-Hot Encoding Visualization</h2>
                <div className="text-lg">
                  {animationStage === 0 && "Original dataset with categorical 'city' variable"}
                  {animationStage === 1 && "Starting to encode 'city' into binary columns..."}
                  {animationStage === 2 && "All cities encoded as separate binary columns"}
                  {animationStage === 3 && "Removing original 'city' column"}
                  {animationStage === 4 && "Final one-hot encoded dataset (wider and sparse)"}
                </div>
              </div>
              
              <div className={`overflow-x-auto w-full ${getTransitionStyles()}`}>
                <table className="min-w-full bg-white border border-gray-300 shadow-lg">
                  <thead>
                    <tr className="bg-blue-500 text-white">
                      {visibleColumns.map(column => (
                        <th 
                          key={column}
                          className={`p-2 border ${
                            column.startsWith('city_') ? 'bg-green-600 text-white' : ''
                          }`}
                        >
                          {column.startsWith('city_') 
                            ? column.replace('city_', '').replace(/_/g, ' ') 
                            : column}
                        </th>
                      ))}
                    </tr>
                  </thead>
                  <tbody>
                    {(animationStage < 3 ? originalData : encodedData).map((row, rowIndex) => (
                      <tr key={rowIndex} className={rowIndex % 2 === 0 ? 'bg-gray-50' : 'bg-white'}>
                        {visibleColumns.map((column, colIndex) => (
                          <td 
                            key={`${rowIndex}-${colIndex}`}
                            className={`p-2 border text-center ${
                              column.startsWith('city_') 
                                ? (row[column] === 1 ? 'bg-green-100 font-bold' : '') 
                                : ''
                            } ${getTransitionStyles()}`}
                            style={{
                              minWidth: column.startsWith('city_') ? '80px' : '100px'
                            }}
                          >
                            {row[column] !== undefined ? row[column] : ''}
                          </td>
                        ))}
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
              
              <div className="mt-6 flex items-center">
                <div className="w-8 h-4 bg-blue-500 rounded-sm mr-2"></div>
                <span className="mr-6">Original columns</span>
                
                <div className="w-8 h-4 bg-green-600 rounded-sm mr-2"></div>
                <span>One-hot encoded columns</span>
              </div>
              
              <div className="mt-8 text-center text-lg">
                <p>Original width: 4 columns → New width: {3 + uniqueCities.length} columns</p>
                <p className="text-sm mt-2 text-gray-600">Note how the dataset becomes wider but mostly filled with zeros (sparse)</p>
              </div>
            </div>
          );
        };

        // Don't forget to import React hooks
        const { useState, useEffect } = React;
        
        // Render the component
        const rootElement = document.getElementById('widget-root');
        const root = ReactDOM.createRoot(rootElement);
        root.render(<OneHotEncodingAnimation />);
    </script>
</body>
</html>